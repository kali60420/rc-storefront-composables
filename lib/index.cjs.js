"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@kali604/reactioncommerce-api"),e=require("@vue/composition-api"),n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var u in e=arguments[n])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t}).apply(this,arguments)};function r(t,e,n,r){return new(n||(n=Promise))((function(u,a){function i(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?u(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,o)}l((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,u,a,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(u=2&a[0]?r.return:a[0]?r.throw||((u=r.return)&&u.call(r),0):r.next)&&!(u=u.call(r,a[1])).done)return u;switch(r=0,u&&(a=[2&a[0],u.value]),a[0]){case 0:case 1:u=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(u=i.trys,(u=u.length>0&&u[u.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!u||a[1]>u[0]&&a[1]<u[3])){i.label=a[1];break}if(6===a[0]&&i.label<u[1]){i.label=u[1],u=a;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(a);break}u[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=u=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}var a=[],i=[],o=function(t){return t.$isServer?t.$ssrContext.nuxt.vsfState:window.__VSF_STATE__||{}},l=0,c=function(t){var n=e.getCurrentInstance();n.$isServer&&!n.$ssrContext.nuxt.vsfState&&(n.$ssrContext.nuxt.vsfState={});return{saveToInitialState:function(e){!function(t,e){var n=a.filter((function(e){return e.eventName===t}));n.forEach((function(t){t.handler(e)})),0===n.length&&i.push({eventName:t,value:e})}("set-ssr-cache",{key:t,value:e})},initialState:o(n)[t]}};var d=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{key:t.key,value:t.value,valueType:t.valueType}}))},s=function(t){if(null!=t&&void 0!==t)return t.map((function(t){var e;return{currency:t.currency,displayPrice:t.displayPrice,minPrice:t.minPrice.toFixed(2),maxPrice:t.maxPrice.toFixed(2),compareAtPrice:null===(e=t.compareAtPrice)||void 0===e?void 0:e.displayAmount}}))};var v=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{key:t.key,value:t.value,description:t.description,valueType:t.valueType}}))},f=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{currency:t.currency,displayPrice:t.displayPrice,minPrice:t.minPrice.toFixed(2),maxPrice:t.maxPrice.toFixed(2)}}))};function p(t){return null==t||void 0===t?null:{productId:t.product.productId,pageTitle:t.product.pageTitle,description:t.product.description,isVisible:t.product.isVisible,sku:t.product.sku,slug:t.product.slug,minOrderQuantity:t.product.minOrderQuantity,originCountry:t.product.originCountry,productType:t.product.productType,isSoldOut:t.product.isSoldOut,isLowQuantity:t.product.isLowQuantity,isBackorder:t.product.isBackorder,vendor:t.product.vendor,width:t.product.width,weight:t.product.weight,height:t.product.height,pricing:f(t.product.pricing),metafields:v(t.product.metafields),variants:t.product.variants}}var m=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{key:t.key,value:t.value,valueType:t.valueType}}))};var h,g=(h={search:function(e){return r(void 0,void 0,void 0,(function(){var r,a;return u(this,(function(u){switch(u.label){case 0:return r=n(n({},e),{first:e.perPage,offset:(e.page-1)*e.perPage}),[4,t.getCatalogItems(r)];case 1:return a=u.sent(),[2,{data:null==(i=a)||void 0===i?[]:i.data.searchProducts.edges.map((function(t){return{productId:t.node.product.productId,pageTitle:t.node.product.pageTitle,description:t.node.product.description,isVisible:t.node.product.isVisible,sku:t.node.product.sku,slug:t.node.product.slug,minOrderQuantity:t.node.product.minOrderQuantity,originCountry:t.node.product.originCountry,productType:t.node.product.productType,isSoldOut:t.node.product.isSoldOut,isLowQuantity:t.node.product.isLowQuantity,isBackorder:t.node.product.isBackorder,vendor:t.node.product.vendor,width:t.node.product.width,weight:t.node.product.weight,height:t.node.product.height,supportedFulfillmentTypes:t.node.product.supportedFulfillmentTypes,pricing:s(t.node.product.pricing),metafields:d(t.node.product.metafields),variants:t.node.product.variants,tags:t.node.product.tags.nodes}})),total:a.data.catalogItems.totalCount}]}var i}))}))}},function(t){var n=this,a=c(t),i=a.initialState,o=a.saveToInitialState;null!=i&&void 0!==i||o({data:[],total:0});var l=e.ref((null==i?void 0:i.data)||[]),d=e.ref((null==i?void 0:i.total)||0),s=e.ref(!1);return{catalogItems:e.computed((function(){return l.value})),total:e.computed((function(){return d.value})),search:function(t){return r(n,void 0,void 0,(function(){var e,n,r;return u(this,(function(u){switch(u.label){case 0:return s.value=!0,[4,h.search(t)];case 1:return e=u.sent(),n=e.data,r=e.total,l.value=n,d.value=r,o({data:n,total:r}),s.value=!1,[2]}}))}))},loading:e.computed((function(){return s.value}))}}),y=function(t){return function(n){var a=this,i=c(n),o=i.initialState,l=i.saveToInitialState;null!=o&&void 0!==o||l({data:null});var d=e.ref((null==o?void 0:o.data)||null),s=e.ref(!1);return{product:e.computed((function(){return d.value})),search:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return s.value=!0,[4,t.catalogItem(e)];case 1:return n=r.sent().data,d.value=n,l({data:n}),s.value=!1,[2]}}))}))},find:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return s.value=!0,[4,t.search(e)];case 1:return n=r.sent().data,d.value=n,l({data:n}),s.value=!1,[2]}}))}))},loading:e.computed((function(){return s.value}))}}}({catalogItem:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return[4,t.getCatalogItem(e)];case 1:return n=r.sent(),[2,{data:p(n.data.catalogItemProduct)}]}}))}))},search:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return[4,t.searchCatalogItem(e)];case 1:return n=r.sent(),[2,{data:p(n.data.searchCatalogItem)}]}}))}))}}),I=function(t){return function(n){var a=this,i=c(n),o=i.initialState,l=i.saveToInitialState;null!=o&&void 0!==o||l({data:[],total:0});var d=e.ref((null==o?void 0:o.data)||[]),s=e.ref((null==o?void 0:o.total)||0),v=e.ref(!1);return{tags:e.computed((function(){return d.value})),total:e.computed((function(){return s.value})),search:function(e){return r(a,void 0,void 0,(function(){var n,r,a;return u(this,(function(u){switch(u.label){case 0:return v.value=!0,[4,t.search(e)];case 1:return n=u.sent(),r=n.data,a=n.total,d.value=r,s.value=a,l({data:r,total:a}),v.value=!1,[2]}}))}))},loading:e.computed((function(){return v.value}))}}}({search:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return[4,t.getTags(e)];case 1:return n=r.sent(),[2,{data:null==(u=n)||void 0===u?[]:u.data.tags.edges.map((function(t){return{_id:t.node._id,slug:t.node.slug,name:t.node.name,displayTitle:t.node.displayTitle,isVisible:t.node.isVisible,isTopLevel:t.node.isTopLevel,updatedAt:t.node.updatedAt,createdAt:t.node.createdAt,subTags:t.node.subTags.nodes,imageUrl:t.node.heroMediaUrl,metafields:m(t.node.metafields)}})),total:n.data.tags.totalCount}]}var u}))}))}}),b={getCartId:function(t){return t._id},getTotals:function(t){var e,n,r,u,a,i,o,l,c,d,s,v,f,p,m,h;return{total:{displayPrice:(null===(e=t.checkout.summary.total)||void 0===e?void 0:e.displayAmount)||"- -",amount:(null===(n=t.checkout.summary.total)||void 0===n?void 0:n.amount)||0},subtotal:{displayPrice:(null===(r=t.checkout.summary.itemTotal)||void 0===r?void 0:r.displayAmount)||"- -",amount:(null===(u=t.checkout.summary.itemTotal)||void 0===u?void 0:u.amount)||0},tax:{displayPrice:(null===(a=t.checkout.summary.taxTotal)||void 0===a?void 0:a.displayAmount)||"- -",amount:(null===(i=t.checkout.summary.taxTotal)||void 0===i?void 0:i.amount)||0},fulfillment:{displayPrice:(null===(o=t.checkout.summary.fulfillmentTotal)||void 0===o?void 0:o.displayAmount)||"- -",amount:(null===(l=t.checkout.summary.fulfillmentTotal)||void 0===l?void 0:l.amount)||0},discount:{displayPrice:(null===(c=t.checkout.summary.discountTotal)||void 0===c?void 0:c.displayAmount)||"- -",amount:(null===(d=t.checkout.summary.discountTotal)||void 0===d?void 0:d.amount)||0},checkout:{amount:(null===(s=t.checkout.summary.itemTotal)||void 0===s?void 0:s.amount)+(null===(v=t.checkout.summary.fulfillmentTotal)||void 0===v?void 0:v.amount)},shipping:{amount:null===(f=t.checkout.summary.shippingTotal)||void 0===f?void 0:f.amount,displayPrice:(null===(p=t.checkout.summary.shippingTotal)||void 0===p?void 0:p.displayAmount)||"- -"},handling:{amount:null===(m=t.checkout.summary.handlingTotal)||void 0===m?void 0:m.amount,displayPrice:(null===(h=t.checkout.summary.handlingTotal)||void 0===h?void 0:h.displayAmount)||"- -"}}},getShippingPrice:function(t){return t.selectedFulfillmentOption.price.amount},getItems:function(t){return t?t.items.nodes:[]},getItemName:function(t){return t.title},getItemVariantName:function(t){return t.variantTitle},getItemImage:function(t){return""},getItemPrice:function(t){return t?{regular:t.subtotal.amount.toFixed(2)}:{regular:0,special:0}},getItemDisplayPrice:function(t){return t?{regular:t.subtotal.displayAmount}:{regular:0,special:0}},getItemQty:function(t){return t.quantity},getItemStaffel:function(t){var e=t.metafields.find((function(t){return"orderquantitybatch"==t.key}));return e?parseInt(e.value,10):1},getItemMOQ:function(t){var e=t.metafields.find((function(t){return"minOrderQuantity"==t.key}));return e?parseInt(e.value,10):1},getItemSku:function(t){return t.productSlug},getTotalItems:function(t){if(!t)return 0;var e=0;return t.items.nodes.forEach((function(t){e+=t.quantity})),e},getFulfillmentGroup:function(t){return t.checkout.fulfillmentGroups[0]},getShippingMethods:function(t){return t.availableFulfillmentOptions||[]},getSelectedShippingMethod:function(t){return t.selectedFulfillmentOption}},k={getId:function(t){return t.productId},getSlug:function(t){return t.slug},getPageTitle:function(t){return t.pageTitle},getTitle:function(t){return t.title},getDescription:function(t){return t.description},getSku:function(t){return t.sku},getMinOrderQuantity:function(t){return t.minOrderQuantity||1},getVendor:function(t){return t.vendor},getAttributes:function(t){return t.metafields.map((function(t){return{key:t.key,value:t.value,description:t.description}}))},getPricing:function(t,e){var n=t.pricing.find((function(t){return t.currency.code==e}));return n?{regular:n.maxPrice,special:n.minPrice}:null},getDisplayPrice:function(t,e){var n;return(null===(n=t.pricing.find((function(t){return t.currency.code==e})))||void 0===n?void 0:n.displayPrice)||"- -"},getProductImages:function(t){return t.images||[]},getVariantImages:function(t){var e=[];return t.cloudinary&&t.cloudinary.forEach((function(t){e.push({small:t.URLs.small,medium:t.URLs.medium,large:t.URLs.large,thumbnail:t.URLs.thumbnail,toGrid:t.toGrid})})),e},getProductVariants:function(t){return t.variants},getVariantSku:function(t){return t.sku},getInventory:function(t){return t.inventoryInStock}},S={getId:function(t){return t._id},getPersonalDetails:function(t){return{}},getShippingDetails:function(t){return{}},getFulfillmentGroupId:function(t){return t._id},getShippingMethodId:function(t){return t.fulfillmentMethod._id},getShippingMethodName:function(t){return t.fulfillmentMethod.name},getShippingMethodLabel:function(t){return t.fulfillmentMethod.displayName},getShippingMethodPrice:function(t){return t.price.amount-t.handlingPrice.amount},getShippingMethodDisplayPrice:function(t){return t.price.displayAmount},getShippingMethodHandlingDisplayPrice:function(t){return t?t.handlingPrice.displayAmount:"- -"},getOrderItems:function(t){var e=[];return t.items.nodes.forEach((function(t){e.push({addedAt:t.addedAt,price:t.price,quantity:t.quantity,productConfiguration:t.productConfiguration})})),e}},M={getId:function(t){return t._id},getReferenceId:function(t){return t.referenceId},getDate:function(t){return t.createdAt},getPrice:function(t){return t.payments[0].amount.amount.toFixed(2)},getDisplayPrice:function(t){return t.payments[0].amount.displayAmount},getStatus:function(t){return t.displayStatus}},w=function(t){return function(n){var a=this,i=c(n),o=i.initialState,l=i.saveToInitialState;null!=o&&void 0!==o||l({cart:t.cart,token:t.token,shippingMethods:t.shippingMethods,fulfillmentMethodId:t.selectedFulfillmentMethod});var d=e.ref(!1);return{cart:e.computed((function(){return t.cart.value})),token:e.computed((function(){return t.token.value})),shippingMethods:e.computed((function(){return t.shippingMethods.value})),selectedFulfillmentMethod:e.computed((function(){return t.selectedFulfillmentMethod.value})),loadCart:function(e){return r(a,void 0,void 0,(function(){var n,r,a,i,o;return u(this,(function(u){switch(u.label){case 0:return d.value=!0,[4,t.loadCart(e)];case 1:return n=u.sent(),r=n.cart,a=n.token,i=n.fulfillmentMethodId,o=n.options,t.cart.value=r,t.token.value=a,t.selectedFulfillmentMethod.value=i,t.shippingMethods.value=o,l({cart:t.cart,token:t.token,fulfillmentMethodId:t.selectedFulfillmentMethod,shippingMethods:t.shippingMethods.value}),d.value=!1,[2]}}))}))},loadAccountCart:function(e){return r(a,void 0,void 0,(function(){var n,r,a,i;return u(this,(function(u){switch(u.label){case 0:return d.value=!0,[4,t.loadAccountCart(e)];case 1:return n=u.sent(),r=n.cart,a=n.fulfillmentMethodId,i=n.options,t.cart.value=r,t.selectedFulfillmentMethod.value=a,t.shippingMethods.value=i,l({cart:t.cart,fulfillmentMethodId:t.selectedFulfillmentMethod,shippingMethods:t.shippingMethods.value}),d.value=!1,[2]}}))}))},addToCart:function(e){return r(a,void 0,void 0,(function(){var n,r,a;return u(this,(function(u){switch(u.label){case 0:return d.value=!0,[4,t.addToCart(e)];case 1:return n=u.sent(),r=n.cart,a=n.token,t.cart.value=r,t.token.value=a,l({cart:t.cart,token:t.token}),d.value=!1,[2]}}))}))},updateCartItem:function(e){return r(a,void 0,void 0,(function(){var n,r,a;return u(this,(function(u){switch(u.label){case 0:return d.value=!0,[4,t.updateCartItem(e)];case 1:return n=u.sent(),r=n.cart,a=n.token,t.cart.value=r,t.token.value=a,l({cart:t.cart,token:t.token}),d.value=!1,[2]}}))}))},removeFromCart:function(e){return r(a,void 0,void 0,(function(){var n,r,a;return u(this,(function(u){switch(u.label){case 0:return d.value=!0,[4,t.removeFromCart(e)];case 1:return n=u.sent(),r=n.cart,a=n.token,t.cart.value=r,t.token.value=a,l({cart:t.cart,token:t.token}),d.value=!1,[2]}}))}))},setShippingAddress:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return d.value=!0,[4,t.setShippingAddress(e)];case 1:return n=r.sent().cart,t.cart.value=n,l({cart:t.cart,token:t.token}),d.value=!1,[2]}}))}))},updateShippingMethods:function(e){return r(a,void 0,void 0,(function(){var n,r,a;return u(this,(function(u){switch(u.label){case 0:return d.value=!0,[4,t.updateShippingMethods(e)];case 1:return n=u.sent(),r=n.cart,a=n.options,t.cart.value=r,t.shippingMethods.value=a,l({cart:t.cart,shippingMethods:t.shippingMethods}),d.value=!1,[2]}}))}))},setFulfillmentMethod:function(e){return r(a,void 0,void 0,(function(){var n,r,a;return u(this,(function(u){switch(u.label){case 0:return d.value=!0,[4,t.setFulfillmentMethod(e)];case 1:return n=u.sent(),r=n.cart,a=n.fulfillmentMethodId,t.cart.value=r,t.selectedFulfillmentMethod.value=a,l({cart:t.cart}),d.value=!1,[2]}}))}))},addCoupon:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return d.value=!0,[4,t.addCoupon(e)];case 1:return n=r.sent().cart,t.cart.value=n,l({cart:t.cart}),d.value=!1,[2]}}))}))},finalizeCart:function(){return r(a,void 0,void 0,(function(){return u(this,(function(e){return t.cart.value=null,t.token.value=null,t.selectedFulfillmentMethod.value=null,l({cart:t.cart,token:t.token,selectedFulfillmentMethod:t.selectedFulfillmentMethod}),[2]}))}))},loading:e.computed((function(){return d.value}))}}}({cart:e.ref(null),token:e.ref(null),shippingMethods:e.ref([]),selectedFulfillmentMethod:e.ref(null),loadCart:function(e){return r(void 0,void 0,void 0,(function(){var r,a,i,o,l;return u(this,(function(u){switch(u.label){case 0:return[4,t.getCart(e)];case 1:return r=u.sent(),a=b.getFulfillmentGroup(r.data.anonymousCartByCartId),i=b.getSelectedShippingMethod(a),o=b.getShippingMethods(a),l={cart:r.data.anonymousCartByCartId,token:e.token,options:o,fulfillmentMethodId:null},i&&(l=n(n({},l),{fulfillmentMethodId:S.getShippingMethodId(i)})),[2,l]}}))}))},loadAccountCart:function(e){return r(void 0,void 0,void 0,(function(){var r,a,i,o,l,c;return u(this,(function(u){switch(u.label){case 0:return r=Buffer.from("reaction/account:"+e.accountId,"binary").toString("base64"),[4,t.getAccountCart({accountId:r,shopId:e.shopId})];case 1:return a=u.sent(),i=b.getFulfillmentGroup(a.data.accountCartByAccountId),o=b.getSelectedShippingMethod(i),l=b.getShippingMethods(i),c={cart:a.data.accountCartByAccountId,options:l,fulfillmentMethodId:null},o&&(c=n(n({},c),{fulfillmentMethodId:S.getShippingMethodId(o)})),[2,c]}}))}))},addToCart:function(e){return r(void 0,void 0,void 0,(function(){var n,r;return u(this,(function(u){switch(u.label){case 0:return n=[{quantity:e.quantity,productConfiguration:{productId:e.productId,productVariantId:e.variantId},price:{amount:e.price,currencyCode:e.currency},metafields:e.metafields}],null!=e.cartId?[3,2]:[4,t.createCart({shopId:e.shopId,items:n})];case 1:return[2,{cart:(r=u.sent()).data.createCart.cart,token:r.data.createCart.token}];case 2:return[4,t.addToCart({cartId:e.cartId,cartToken:e.token,items:n})];case 3:return[2,{cart:u.sent().data.addCartItems.cart,token:e.token}]}}))}))},updateCartItem:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=[{cartItemId:e.cartItemId,quantity:e.quantity}],[4,t.updateCartItem({cartId:e.cartId,cartToken:e.cartToken,items:n})];case 1:return[2,{cart:r.sent().data.updateCartItemsQuantity.cart,token:e.cartToken}]}}))}))},removeFromCart:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=[e.cartItemId],[4,t.removeCartItems({cartId:e.cartId,cartToken:e.cartToken,cartItemIds:n})];case 1:return[2,{cart:r.sent().data.removeCartItems.cart,token:e.cartToken}]}}))}))},setShippingAddress:function(e){return r(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,t.setShippingAddressToCart(e)];case 1:return[2,{cart:n.sent().data.setShippingAddressOnCart.cart,token:e.cartToken}]}}))}))},updateShippingMethods:function(e){return r(void 0,void 0,void 0,(function(){var n,r,a;return u(this,(function(u){switch(u.label){case 0:return[4,t.setShippingAddressToCart(e)];case 1:return n=u.sent(),r=b.getFulfillmentGroup(n.data.updateFulfillmentOptionsForGroup.cart),a=b.getShippingMethods(r),[2,{cart:n.data.updateFulfillmentOptionsForGroup.cart,token:e.cartToken,options:a}]}}))}))},setFulfillmentMethod:function(e){return r(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,t.selectShippingMethod(e)];case 1:return[2,{cart:n.sent().data.selectFulfillmentOptionForGroup.cart,token:e.cartToken,fulfillmentMethodId:e.fulfillmentMethodId}]}}))}))},addCoupon:function(e){return r(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,t.addCoupon(e)];case 1:return[2,{cart:n.sent().data.applyDiscountCodeToCart.cart,token:e.cartToken}]}}))}))},finalizeCart:function(){return r(void 0,void 0,void 0,(function(){return u(this,(function(t){return[2]}))}))}}),T=function(t){return function(n){var a=this,i=c(n),o=i.initialState,l=i.saveToInitialState;null!=o&&void 0!==o||l({user:{}});var d=e.ref((null==o?void 0:o.user)||null),s=e.ref((null==o?void 0:o.orders)||[]),v=e.ref(!1);return{user:e.computed((function(){return d.value})),userorders:e.computed((function(){return s.value})),load:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return v.value=!0,[4,t.loadAccount(e)];case 1:return n=r.sent().data,d.value=n,l({data:n}),v.value=!1,[2]}}))}))},update:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return v.value=!0,[4,t.updateAccount(e)];case 1:return n=r.sent().user,d.value=n,l({mutationResult:n}),v.value=!1,[2]}}))}))},orders:function(e){return r(a,void 0,void 0,(function(){var n,r;return u(this,(function(u){switch(u.label){case 0:return v.value=!0,[4,t.getOrders(e)];case 1:return n=u.sent(),r=n.data,s.value=r,l({data:r}),v.value=!1,[2]}}))}))},addAddressBookEntry:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return v.value=!0,[4,t.addAddressBookEntry(e)];case 1:return n=r.sent().user,d.value=n,l({user:n}),v.value=!1,[2]}}))}))},updateAddressBookEntry:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return v.value=!0,[4,t.updateAddressBookEntry(e)];case 1:return n=r.sent().user,d.value=n,l({user:n}),v.value=!1,[2]}}))}))},loading:e.computed((function(){return v.value}))}}}({user:e.ref({}),userorders:e.ref([]),loadAccount:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Buffer.from("reaction/account:"+e.accountId,"binary").toString("base64"),[4,t.getAccount({accountId:n})];case 1:return[2,{data:r.sent().data.account}]}}))}))},updateAccount:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Buffer.from("reaction/account:"+e.accountId,"binary").toString("base64"),[4,t.updateAccount({accountId:n,firstName:e.firstName,lastName:e.lastName})];case 1:return[2,{user:r.sent().data.account}]}}))}))},getOrders:function(e){return r(void 0,void 0,void 0,(function(){var r,a,i;return u(this,(function(u){switch(u.label){case 0:return r=Buffer.from("reaction/account:"+e.accountId,"binary").toString("base64"),[4,t.getOrdersByAccountId({accountId:r,language:e.language,shopIds:[e.shopId]})];case 1:return a=u.sent(),o=a.data.ordersByAccountId,[2,{total:(i=null==o||void 0===o?[]:o.nodes.map((function(t){return n({},t)}))).length,data:i}]}var o}))}))},addAddressBookEntry:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Buffer.from("reaction/account:"+e.accountId,"binary").toString("base64"),[4,t.addAddressBookEntry({accountId:n,address:e.address})];case 1:return[2,{user:r.sent().data.addAddressBookAccountEntry}]}}))}))},updateAddressBookEntry:function(e){return r(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Buffer.from("reaction/account:"+e.accountId,"binary").toString("base64"),[4,t.updateAddressBookEntry({accountId:n,addressId:e.addressId,address:e.address})];case 1:return[2,{user:r.sent().data.updateAddressBookAccountEntry}]}}))}))}}),C=e.ref({firstName:null,lastName:null,email:null,password:null}),P=e.ref({firstName:null,lastName:null,address1:null,streetNumber:null,phone:null,postal:null,city:null,country:null,company:null}),N=e.ref({firstName:null,lastName:null,address1:null,streetNumber:null,phone:null,postal:null,city:null,country:null,company:null}),A=e.ref([]),x=e.ref(null),F=e.ref(null),O=e.ref({personalDetails:!0,shipping:!0,payment:!0}),D=function(t){return function(n){var a=this,i=c(n),o=i.initialState,l=i.saveToInitialState;null!=o&&void 0!==o||l({personalDetails:t.personalDetails});var d=e.ref(!1);return{disabled:e.computed((function(){return t.disabled.value})),personalDetails:e.computed((function(){return t.personalDetails.value})),shippingDetails:e.computed((function(){return t.shippingDetails.value})),billingDetails:e.computed((function(){return t.billingDetails.value})),paymentMethods:e.computed((function(){return t.paymentMethods.value})),orderReferenceId:e.computed((function(){return t.orderReferenceId.value})),chosenPaymentMethod:e.computed((function(){return t.chosenPaymentMethod.value})),loading:e.computed((function(){return d.value})),placeOrder:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return d.value=!0,[4,t.placeOrder(e)];case 1:return n=r.sent().referenceId,t.orderReferenceId.value=n,d.value=!1,[2]}}))}))},availablePaymentMethods:function(e){return r(a,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return d.value=!0,[4,t.availablePaymentMethods(e)];case 1:return n=r.sent().data,t.paymentMethods.value=n,d.value=!1,[2]}}))}))},setPersonalDetails:function(e){return r(a,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return d.value=!0,[4,t.setPersonalDetails(e)];case 1:return n.sent(),d.value=!1,[2]}}))}))},setShippingDetails:function(e){return r(a,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return d.value=!0,[4,t.setShippingDetails(e)];case 1:return n.sent(),d.value=!1,[2]}}))}))},setBillingDetails:function(e){return r(a,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return d.value=!0,[4,t.setBillingDetails(e)];case 1:return n.sent(),d.value=!1,[2]}}))}))},setPaymentMethod:function(e){return r(a,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return d.value=!0,[4,t.setPaymentMethod(e)];case 1:return n.sent(),d.value=!1,[2]}}))}))}}}}({disabled:O,personalDetails:C,shippingDetails:P,billingDetails:N,paymentMethods:A,chosenPaymentMethod:x,orderReferenceId:F,placeOrder:function(e){return r(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,t.placeOrder(e)];case 1:return[2,{referenceId:n.sent().data.placeOrder.orders[0].referenceId}]}}))}))},availablePaymentMethods:function(e){return r(void 0,void 0,void 0,(function(){var n,r;return u(this,(function(u){switch(u.label){case 0:return[4,t.availablePaymentMethods(e)];case 1:return[2,{data:(n=u.sent()).data.availablePaymentMethods,total:(null===(r=n.data.availablePaymentMethods)||void 0===r?void 0:r.length)||0}]}}))}))},setPersonalDetails:function(t){return r(void 0,void 0,void 0,(function(){return u(this,(function(e){return t.firstName&&(C.value.firstName=t.firstName),t.lastName&&(C.value.lastName=t.lastName),t.email&&(C.value.email=t.email),null!=C.value.firstName&&null!=C.value.lastName&&null!=C.value.email&&(O.value.personalDetails=!1),[2]}))}))},setShippingDetails:function(t){return r(void 0,void 0,void 0,(function(){return u(this,(function(e){return t.streetName&&(P.value.address1=t.streetName),t.streetNumber&&(P.value.streetNumber=t.streetNumber),t.city&&(P.value.city=t.city),t.country&&(P.value.country=t.country),t.postalCode&&(P.value.postal=t.postalCode),t.phone&&(P.value.phone=t.phone),t.firstName&&(P.value.firstName=t.firstName),t.lastName&&(P.value.lastName=t.lastName),null!=P.value.firstName&&null!=P.value.lastName&&null!=P.value.city&&null!=P.value.country&&null!=P.value.postal&&null!=P.value.address1&&null!=P.value.streetNumber&&null!=P.value.phone&&(O.value.shipping=!1),[2]}))}))},setBillingDetails:function(t){return r(void 0,void 0,void 0,(function(){return u(this,(function(e){return t.firstName&&(N.value.firstName=t.firstName),t.lastName&&(N.value.lastName=t.lastName),t.streetName&&(N.value.address1=t.streetName),t.streetNumber&&(N.value.streetNumber=t.streetNumber),t.city&&(N.value.city=t.city),t.country&&(N.value.country=t.country),t.postalCode&&(N.value.postal=t.postalCode),t.phone&&(N.value.phone=t.phone),t.company&&(N.value.company=t.company),null!=N.value.city&&null!=N.value.country&&null!=N.value.postal&&null!=N.value.address1&&null!=N.value.streetNumber&&null!=N.value.phone&&null!=N.value.firstName&&null!=N.value.lastName&&(O.value.payment=!1),[2]}))}))},setPaymentMethod:function(t){return r(void 0,void 0,void 0,(function(){return u(this,(function(e){return x.value=t,O.value.payment=!1,[2]}))}))}});e.ref(null);var B=function(t){return function(n){var a=this,i=c(n),o=i.initialState,l=i.saveToInitialState;null!=o&&void 0!==o||l({primaryShopId:null});var d=e.ref((null==o?void 0:o.primaryShopId)||null),s=e.ref(!1);return{primaryShopId:e.computed((function(){return d.value})),getPrimaryShopId:function(){return r(a,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return s.value=!0,[4,t.getPrimaryShopId()];case 1:return e=n.sent().data,d.value=e,l({primaryShopId:d}),s.value=!1,[2]}}))}))},loading:e.computed((function(){return s.value}))}}}({getPrimaryShopId:function(){return r(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,t.getPrimaryShopId()];case 1:return[2,{data:e.sent().data.primaryShopId}]}}))}))}});exports.cartGetters=b,exports.catalogItemGetters=k,exports.checkoutGetters=S,exports.onSSR=function(t){var n,o=e.getCurrentInstance(),c=o.$isServer;c&&!o.$ssrContext.nuxt.vsfState&&(o.$ssrContext.nuxt.vsfState={}),e.onServerPrefetch((function(){return r(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),n="set-ssr-cache",r=function(t){var e=t.key,n=t.value;o.$ssrContext.nuxt.vsfState[e]=n},a.push({eventName:n,handler:r}),i.filter((function(t){return t.eventName===n})).forEach((function(t){r(t.value)})),i=i.filter((function(t){return t.eventName!==n})),[2]}var n,r}))}))})),!c&&(n=window.__VSF_STATE__?JSON.stringify(window.__VSF_STATE__).length:0,l===n||(l=n,0))&&t()},exports.orderGetters=M,exports.useCart=w,exports.useCatalogItem=y,exports.useCatalogItems=g,exports.useCheckout=D,exports.usePrimaryShop=B,exports.useSSR=c,exports.useTags=I,exports.useUser=T;
