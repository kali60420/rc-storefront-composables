import{getCatalogItems as t,getCatalogItem as e,searchCatalogItem as n,getTags as r,getCart as a,getAccountCart as u,addToCart as i,createCart as o,updateCartItem as l,removeCartItems as c,setShippingAddressToCart as s,selectShippingMethod as d,addCoupon as v,getAccount as f,updateAccount as p,getOrdersByAccountId as h,addAddressBookEntry as m,updateAddressBookEntry as g,availablePaymentMethods as y,placeOrder as I,getPrimaryShopId as b}from"@kali604/reactioncommerce-api";import{getCurrentInstance as k,onServerPrefetch as S,ref as M,computed as w}from"@vue/composition-api";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(){return(T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function P(t,e,n,r){return new(n||(n=Promise))((function(a,u){function i(t){try{l(r.next(t))}catch(t){u(t)}}function o(t){try{l(r.throw(t))}catch(t){u(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,o)}l((r=r.apply(t,e||[])).next())}))}function C(t,e){var n,r,a,u,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function o(u){return function(o){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){i.label=u[1];break}if(6===u[0]&&i.label<a[1]){i.label=a[1],a=u;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(u);break}a[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,o])}}}var N=[],A=[],F=function(t){return t.$isServer?t.$ssrContext.nuxt.vsfState:window.__VSF_STATE__||{}},x=0,D=function(t){var e,n=k(),r=n.$isServer;r&&!n.$ssrContext.nuxt.vsfState&&(n.$ssrContext.nuxt.vsfState={}),S((function(){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),r="set-ssr-cache",a=function(t){var e=t.key,r=t.value;n.$ssrContext.nuxt.vsfState[e]=r},N.push({eventName:r,handler:a}),A.filter((function(t){return t.eventName===r})).forEach((function(t){a(t.value)})),A=A.filter((function(t){return t.eventName!==r})),[2]}var r,a}))}))})),!r&&(e=window.__VSF_STATE__?JSON.stringify(window.__VSF_STATE__).length:0,x===e||(x=e,0))&&t()},O=function(t){var e=k();e.$isServer&&!e.$ssrContext.nuxt.vsfState&&(e.$ssrContext.nuxt.vsfState={});return{saveToInitialState:function(e){!function(t,e){var n=N.filter((function(e){return e.eventName===t}));n.forEach((function(t){t.handler(e)})),0===n.length&&A.push({eventName:t,value:e})}("set-ssr-cache",{key:t,value:e})},initialState:F(e)[t]}};var B=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{key:t.key,value:t.value,valueType:t.valueType}}))},_=function(t){if(null!=t&&void 0!==t)return t.map((function(t){var e;return{currency:t.currency,displayPrice:t.displayPrice,minPrice:t.minPrice.toFixed(2),maxPrice:t.maxPrice.toFixed(2),compareAtPrice:null===(e=t.compareAtPrice)||void 0===e?void 0:e.displayAmount}}))};var E=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{key:t.key,value:t.value,description:t.description,valueType:t.valueType}}))},V=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{currency:t.currency,displayPrice:t.displayPrice,minPrice:t.minPrice.toFixed(2),maxPrice:t.maxPrice.toFixed(2)}}))};function Q(t){return null==t||void 0===t?null:{productId:t.product.productId,pageTitle:t.product.pageTitle,description:t.product.description,isVisible:t.product.isVisible,sku:t.product.sku,slug:t.product.slug,minOrderQuantity:t.product.minOrderQuantity,originCountry:t.product.originCountry,productType:t.product.productType,isSoldOut:t.product.isSoldOut,isLowQuantity:t.product.isLowQuantity,isBackorder:t.product.isBackorder,vendor:t.product.vendor,width:t.product.width,weight:t.product.weight,height:t.product.height,pricing:V(t.product.pricing),metafields:E(t.product.metafields),variants:t.product.variants}}var G=function(t){if(null!=t&&void 0!==t)return t.map((function(t){return{key:t.key,value:t.value,valueType:t.valueType}}))};var L,R=(L={search:function(e){return P(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(a){switch(a.label){case 0:return n=T(T({},e),{first:e.perPage,offset:(e.page-1)*e.perPage}),[4,t(n)];case 1:return r=a.sent(),[2,{data:null==(u=r)||void 0===u?[]:u.data.searchProducts.edges.map((function(t){return{productId:t.node.product.productId,pageTitle:t.node.product.pageTitle,description:t.node.product.description,isVisible:t.node.product.isVisible,sku:t.node.product.sku,slug:t.node.product.slug,minOrderQuantity:t.node.product.minOrderQuantity,originCountry:t.node.product.originCountry,productType:t.node.product.productType,isSoldOut:t.node.product.isSoldOut,isLowQuantity:t.node.product.isLowQuantity,isBackorder:t.node.product.isBackorder,vendor:t.node.product.vendor,width:t.node.product.width,weight:t.node.product.weight,height:t.node.product.height,supportedFulfillmentTypes:t.node.product.supportedFulfillmentTypes,pricing:_(t.node.product.pricing),metafields:B(t.node.product.metafields),variants:t.node.product.variants,tags:t.node.product.tags.nodes}})),total:r.data.catalogItems.totalCount}]}var u}))}))}},function(t){var e=this,n=O(t),r=n.initialState,a=n.saveToInitialState;null!=r&&void 0!==r||a({data:[],total:0});var u=M((null==r?void 0:r.data)||[]),i=M((null==r?void 0:r.total)||0),o=M(!1);return{catalogItems:w((function(){return u.value})),total:w((function(){return i.value})),search:function(t){return P(e,void 0,void 0,(function(){var e,n,r;return C(this,(function(l){switch(l.label){case 0:return o.value=!0,[4,L.search(t)];case 1:return e=l.sent(),n=e.data,r=e.total,u.value=n,i.value=r,a({data:n,total:r}),o.value=!1,[2]}}))}))},loading:w((function(){return o.value}))}}),q=function(t){return function(e){var n=this,r=O(e),a=r.initialState,u=r.saveToInitialState;null!=a&&void 0!==a||u({data:null});var i=M((null==a?void 0:a.data)||null),o=M(!1);return{product:w((function(){return i.value})),search:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return o.value=!0,[4,t.catalogItem(e)];case 1:return n=r.sent().data,i.value=n,u({data:n}),o.value=!1,[2]}}))}))},find:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return o.value=!0,[4,t.search(e)];case 1:return n=r.sent().data,i.value=n,u({data:n}),o.value=!1,[2]}}))}))},loading:w((function(){return o.value}))}}}({catalogItem:function(t){return P(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return[4,e(t)];case 1:return n=r.sent(),[2,{data:Q(n.data.catalogItemProduct)}]}}))}))},search:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(r){switch(r.label){case 0:return[4,n(t)];case 1:return e=r.sent(),[2,{data:Q(e.data.searchCatalogItem)}]}}))}))}}),$=function(t){return function(e){var n=this,r=O(e),a=r.initialState,u=r.saveToInitialState;null!=a&&void 0!==a||u({data:[],total:0});var i=M((null==a?void 0:a.data)||[]),o=M((null==a?void 0:a.total)||0),l=M(!1);return{tags:w((function(){return i.value})),total:w((function(){return o.value})),search:function(e){return P(n,void 0,void 0,(function(){var n,r,a;return C(this,(function(c){switch(c.label){case 0:return l.value=!0,[4,t.search(e)];case 1:return n=c.sent(),r=n.data,a=n.total,i.value=r,o.value=a,u({data:r,total:a}),l.value=!1,[2]}}))}))},loading:w((function(){return l.value}))}}}({search:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return[4,r(t)];case 1:return e=n.sent(),[2,{data:null==(a=e)||void 0===a?[]:a.data.tags.edges.map((function(t){return{_id:t.node._id,slug:t.node.slug,name:t.node.name,displayTitle:t.node.displayTitle,isVisible:t.node.isVisible,isTopLevel:t.node.isTopLevel,updatedAt:t.node.updatedAt,createdAt:t.node.createdAt,subTags:t.node.subTags.nodes,imageUrl:t.node.heroMediaUrl,metafields:G(t.node.metafields)}})),total:e.data.tags.totalCount}]}var a}))}))}}),U={getCartId:function(t){return t._id},getTotals:function(t){var e,n,r,a,u,i,o,l,c,s,d,v,f,p,h,m;return{total:{displayPrice:(null===(e=t.checkout.summary.total)||void 0===e?void 0:e.displayAmount)||"- -",amount:(null===(n=t.checkout.summary.total)||void 0===n?void 0:n.amount)||0},subtotal:{displayPrice:(null===(r=t.checkout.summary.itemTotal)||void 0===r?void 0:r.displayAmount)||"- -",amount:(null===(a=t.checkout.summary.itemTotal)||void 0===a?void 0:a.amount)||0},tax:{displayPrice:(null===(u=t.checkout.summary.taxTotal)||void 0===u?void 0:u.displayAmount)||"- -",amount:(null===(i=t.checkout.summary.taxTotal)||void 0===i?void 0:i.amount)||0},fulfillment:{displayPrice:(null===(o=t.checkout.summary.fulfillmentTotal)||void 0===o?void 0:o.displayAmount)||"- -",amount:(null===(l=t.checkout.summary.fulfillmentTotal)||void 0===l?void 0:l.amount)||0},discount:{displayPrice:(null===(c=t.checkout.summary.discountTotal)||void 0===c?void 0:c.displayAmount)||"- -",amount:(null===(s=t.checkout.summary.discountTotal)||void 0===s?void 0:s.amount)||0},checkout:{amount:(null===(d=t.checkout.summary.itemTotal)||void 0===d?void 0:d.amount)+(null===(v=t.checkout.summary.fulfillmentTotal)||void 0===v?void 0:v.amount)},shipping:{amount:null===(f=t.checkout.summary.shippingTotal)||void 0===f?void 0:f.amount,displayPrice:(null===(p=t.checkout.summary.shippingTotal)||void 0===p?void 0:p.displayAmount)||"- -"},handling:{amount:null===(h=t.checkout.summary.handlingTotal)||void 0===h?void 0:h.amount,displayPrice:(null===(m=t.checkout.summary.handlingTotal)||void 0===m?void 0:m.displayAmount)||"- -"}}},getShippingPrice:function(t){return t.selectedFulfillmentOption.price.amount},getItems:function(t){return t?t.items.nodes:[]},getItemName:function(t){return t.title},getItemVariantName:function(t){return t.variantTitle},getItemImage:function(t){return""},getItemPrice:function(t){return t?{regular:t.subtotal.amount.toFixed(2)}:{regular:0,special:0}},getItemDisplayPrice:function(t){return t?{regular:t.subtotal.displayAmount}:{regular:0,special:0}},getItemQty:function(t){return t.quantity},getItemStaffel:function(t){var e=t.metafields.find((function(t){return"orderquantitybatch"==t.key}));return e?parseInt(e.value,10):1},getItemMOQ:function(t){var e=t.metafields.find((function(t){return"minOrderQuantity"==t.key}));return e?parseInt(e.value,10):1},getItemSku:function(t){return t.productSlug},getTotalItems:function(t){if(!t)return 0;var e=0;return t.items.nodes.forEach((function(t){e+=t.quantity})),e},getFulfillmentGroup:function(t){return t.checkout.fulfillmentGroups[0]},getShippingMethods:function(t){return t.availableFulfillmentOptions||[]},getSelectedShippingMethod:function(t){return t.selectedFulfillmentOption}},j={getId:function(t){return t.productId},getSlug:function(t){return t.slug},getPageTitle:function(t){return t.pageTitle},getTitle:function(t){return t.title},getDescription:function(t){return t.description},getSku:function(t){return t.sku},getMinOrderQuantity:function(t){return t.minOrderQuantity||1},getVendor:function(t){return t.vendor},getAttributes:function(t){return t.metafields.map((function(t){return{key:t.key,value:t.value,description:t.description}}))},getPricing:function(t,e){var n=t.pricing.find((function(t){return t.currency.code==e}));return n?{regular:n.maxPrice,special:n.minPrice}:null},getDisplayPrice:function(t,e){var n;return(null===(n=t.pricing.find((function(t){return t.currency.code==e})))||void 0===n?void 0:n.displayPrice)||"- -"},getProductImages:function(t){return t.images||[]},getVariantImages:function(t){var e=[];return t.cloudinary&&t.cloudinary.forEach((function(t){e.push({small:t.URLs.small,medium:t.URLs.medium,large:t.URLs.large,thumbnail:t.URLs.thumbnail,toGrid:t.toGrid})})),e},getProductVariants:function(t){return t.variants},getVariantSku:function(t){return t.sku},getInventory:function(t){return t.inventoryInStock}},z={getId:function(t){return t._id},getPersonalDetails:function(t){return{}},getShippingDetails:function(t){return{}},getFulfillmentGroupId:function(t){return t._id},getShippingMethodId:function(t){return t.fulfillmentMethod._id},getShippingMethodName:function(t){return t.fulfillmentMethod.name},getShippingMethodLabel:function(t){return t.fulfillmentMethod.displayName},getShippingMethodPrice:function(t){return t.price.amount-t.handlingPrice.amount},getShippingMethodDisplayPrice:function(t){return t.price.displayAmount},getShippingMethodHandlingDisplayPrice:function(t){return t?t.handlingPrice.displayAmount:"- -"},getOrderItems:function(t){var e=[];return t.items.nodes.forEach((function(t){e.push({addedAt:t.addedAt,price:t.price,quantity:t.quantity,productConfiguration:t.productConfiguration})})),e}},H={getId:function(t){return t._id},getReferenceId:function(t){return t.referenceId},getDate:function(t){return t.createdAt},getPrice:function(t){return t.payments[0].amount.amount.toFixed(2)},getDisplayPrice:function(t){return t.payments[0].amount.displayAmount},getStatus:function(t){return t.displayStatus}},J=function(t){return function(e){var n=this,r=O(e),a=r.initialState,u=r.saveToInitialState;null!=a&&void 0!==a||u({cart:t.cart,token:t.token,shippingMethods:t.shippingMethods,fulfillmentMethodId:t.selectedFulfillmentMethod});var i=M(!1);return{cart:w((function(){return t.cart.value})),token:w((function(){return t.token.value})),shippingMethods:w((function(){return t.shippingMethods.value})),selectedFulfillmentMethod:w((function(){return t.selectedFulfillmentMethod.value})),loadCart:function(e){return P(n,void 0,void 0,(function(){var n,r,a,o,l;return C(this,(function(c){switch(c.label){case 0:return i.value=!0,[4,t.loadCart(e)];case 1:return n=c.sent(),r=n.cart,a=n.token,o=n.fulfillmentMethodId,l=n.options,t.cart.value=r,t.token.value=a,t.selectedFulfillmentMethod.value=o,t.shippingMethods.value=l,u({cart:t.cart,token:t.token,fulfillmentMethodId:t.selectedFulfillmentMethod,shippingMethods:t.shippingMethods.value}),i.value=!1,[2]}}))}))},loadAccountCart:function(e){return P(n,void 0,void 0,(function(){var n,r,a,o;return C(this,(function(l){switch(l.label){case 0:return i.value=!0,[4,t.loadAccountCart(e)];case 1:return n=l.sent(),r=n.cart,a=n.fulfillmentMethodId,o=n.options,t.cart.value=r,t.selectedFulfillmentMethod.value=a,t.shippingMethods.value=o,u({cart:t.cart,fulfillmentMethodId:t.selectedFulfillmentMethod,shippingMethods:t.shippingMethods.value}),i.value=!1,[2]}}))}))},addToCart:function(e){return P(n,void 0,void 0,(function(){var n,r,a;return C(this,(function(o){switch(o.label){case 0:return i.value=!0,[4,t.addToCart(e)];case 1:return n=o.sent(),r=n.cart,a=n.token,t.cart.value=r,t.token.value=a,u({cart:t.cart,token:t.token}),i.value=!1,[2]}}))}))},updateCartItem:function(e){return P(n,void 0,void 0,(function(){var n,r,a;return C(this,(function(o){switch(o.label){case 0:return i.value=!0,[4,t.updateCartItem(e)];case 1:return n=o.sent(),r=n.cart,a=n.token,t.cart.value=r,t.token.value=a,u({cart:t.cart,token:t.token}),i.value=!1,[2]}}))}))},removeFromCart:function(e){return P(n,void 0,void 0,(function(){var n,r,a;return C(this,(function(o){switch(o.label){case 0:return i.value=!0,[4,t.removeFromCart(e)];case 1:return n=o.sent(),r=n.cart,a=n.token,t.cart.value=r,t.token.value=a,u({cart:t.cart,token:t.token}),i.value=!1,[2]}}))}))},setShippingAddress:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return i.value=!0,[4,t.setShippingAddress(e)];case 1:return n=r.sent().cart,t.cart.value=n,u({cart:t.cart,token:t.token}),i.value=!1,[2]}}))}))},updateShippingMethods:function(e){return P(n,void 0,void 0,(function(){var n,r,a;return C(this,(function(o){switch(o.label){case 0:return i.value=!0,[4,t.updateShippingMethods(e)];case 1:return n=o.sent(),r=n.cart,a=n.options,t.cart.value=r,t.shippingMethods.value=a,u({cart:t.cart,shippingMethods:t.shippingMethods}),i.value=!1,[2]}}))}))},setFulfillmentMethod:function(e){return P(n,void 0,void 0,(function(){var n,r,a;return C(this,(function(o){switch(o.label){case 0:return i.value=!0,[4,t.setFulfillmentMethod(e)];case 1:return n=o.sent(),r=n.cart,a=n.fulfillmentMethodId,t.cart.value=r,t.selectedFulfillmentMethod.value=a,u({cart:t.cart}),i.value=!1,[2]}}))}))},addCoupon:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return i.value=!0,[4,t.addCoupon(e)];case 1:return n=r.sent().cart,t.cart.value=n,u({cart:t.cart}),i.value=!1,[2]}}))}))},finalizeCart:function(){return P(n,void 0,void 0,(function(){return C(this,(function(e){return t.cart.value=null,t.token.value=null,t.selectedFulfillmentMethod.value=null,u({cart:t.cart,token:t.token,selectedFulfillmentMethod:t.selectedFulfillmentMethod}),[2]}))}))},loading:w((function(){return i.value}))}}}({cart:M(null),token:M(null),shippingMethods:M([]),selectedFulfillmentMethod:M(null),loadCart:function(t){return P(void 0,void 0,void 0,(function(){var e,n,r,u,i;return C(this,(function(o){switch(o.label){case 0:return[4,a(t)];case 1:return e=o.sent(),n=U.getFulfillmentGroup(e.data.anonymousCartByCartId),r=U.getSelectedShippingMethod(n),u=U.getShippingMethods(n),i={cart:e.data.anonymousCartByCartId,token:t.token,options:u,fulfillmentMethodId:null},r&&(i=T(T({},i),{fulfillmentMethodId:z.getShippingMethodId(r)})),[2,i]}}))}))},loadAccountCart:function(t){return P(void 0,void 0,void 0,(function(){var e,n,r,a,i,o;return C(this,(function(l){switch(l.label){case 0:return e=Buffer.from("reaction/account:"+t.accountId,"binary").toString("base64"),[4,u({accountId:e,shopId:t.shopId})];case 1:return n=l.sent(),r=U.getFulfillmentGroup(n.data.accountCartByAccountId),a=U.getSelectedShippingMethod(r),i=U.getShippingMethods(r),o={cart:n.data.accountCartByAccountId,options:i,fulfillmentMethodId:null},a&&(o=T(T({},o),{fulfillmentMethodId:z.getShippingMethodId(a)})),[2,o]}}))}))},addToCart:function(t){return P(void 0,void 0,void 0,(function(){var e,n;return C(this,(function(r){switch(r.label){case 0:return e=[{quantity:t.quantity,productConfiguration:{productId:t.productId,productVariantId:t.variantId},price:{amount:t.price,currencyCode:t.currency},metafields:t.metafields}],null!=t.cartId?[3,2]:[4,o({shopId:t.shopId,items:e})];case 1:return[2,{cart:(n=r.sent()).data.createCart.cart,token:n.data.createCart.token}];case 2:return[4,i({cartId:t.cartId,cartToken:t.token,items:e})];case 3:return[2,{cart:r.sent().data.addCartItems.cart,token:t.token}]}}))}))},updateCartItem:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return e=[{cartItemId:t.cartItemId,quantity:t.quantity}],[4,l({cartId:t.cartId,cartToken:t.cartToken,items:e})];case 1:return[2,{cart:n.sent().data.updateCartItemsQuantity.cart,token:t.cartToken}]}}))}))},removeFromCart:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return e=[t.cartItemId],[4,c({cartId:t.cartId,cartToken:t.cartToken,cartItemIds:e})];case 1:return[2,{cart:n.sent().data.removeCartItems.cart,token:t.cartToken}]}}))}))},setShippingAddress:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,s(t)];case 1:return[2,{cart:e.sent().data.setShippingAddressOnCart.cart,token:t.cartToken}]}}))}))},updateShippingMethods:function(t){return P(void 0,void 0,void 0,(function(){var e,n,r;return C(this,(function(a){switch(a.label){case 0:return[4,s(t)];case 1:return e=a.sent(),n=U.getFulfillmentGroup(e.data.updateFulfillmentOptionsForGroup.cart),r=U.getShippingMethods(n),[2,{cart:e.data.updateFulfillmentOptionsForGroup.cart,token:t.cartToken,options:r}]}}))}))},setFulfillmentMethod:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,d(t)];case 1:return[2,{cart:e.sent().data.selectFulfillmentOptionForGroup.cart,token:t.cartToken,fulfillmentMethodId:t.fulfillmentMethodId}]}}))}))},addCoupon:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,v(t)];case 1:return[2,{cart:e.sent().data.applyDiscountCodeToCart.cart,token:t.cartToken}]}}))}))},finalizeCart:function(){return P(void 0,void 0,void 0,(function(){return C(this,(function(t){return[2]}))}))}}),K=function(t){return function(e){var n=this,r=O(e),a=r.initialState,u=r.saveToInitialState;null!=a&&void 0!==a||u({user:{}});var i=M((null==a?void 0:a.user)||null),o=M((null==a?void 0:a.orders)||[]),l=M(!1);return{user:w((function(){return i.value})),userorders:w((function(){return o.value})),load:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return l.value=!0,[4,t.loadAccount(e)];case 1:return n=r.sent().data,i.value=n,u({data:n}),l.value=!1,[2]}}))}))},update:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return l.value=!0,[4,t.updateAccount(e)];case 1:return n=r.sent().user,i.value=n,u({mutationResult:n}),l.value=!1,[2]}}))}))},orders:function(e){return P(n,void 0,void 0,(function(){var n,r;return C(this,(function(a){switch(a.label){case 0:return l.value=!0,[4,t.getOrders(e)];case 1:return n=a.sent(),r=n.data,o.value=r,u({data:r}),l.value=!1,[2]}}))}))},addAddressBookEntry:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return l.value=!0,[4,t.addAddressBookEntry(e)];case 1:return n=r.sent().user,i.value=n,u({user:n}),l.value=!1,[2]}}))}))},updateAddressBookEntry:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return l.value=!0,[4,t.updateAddressBookEntry(e)];case 1:return n=r.sent().user,i.value=n,u({user:n}),l.value=!1,[2]}}))}))},loading:w((function(){return l.value}))}}}({user:M({}),userorders:M([]),loadAccount:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return e=Buffer.from("reaction/account:"+t.accountId,"binary").toString("base64"),[4,f({accountId:e})];case 1:return[2,{data:n.sent().data.account}]}}))}))},updateAccount:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return e=Buffer.from("reaction/account:"+t.accountId,"binary").toString("base64"),[4,p({accountId:e,firstName:t.firstName,lastName:t.lastName})];case 1:return[2,{user:n.sent().data.account}]}}))}))},getOrders:function(t){return P(void 0,void 0,void 0,(function(){var e,n,r;return C(this,(function(a){switch(a.label){case 0:return e=Buffer.from("reaction/account:"+t.accountId,"binary").toString("base64"),[4,h({accountId:e,language:t.language,shopIds:[t.shopId]})];case 1:return n=a.sent(),u=n.data.ordersByAccountId,[2,{total:(r=null==u||void 0===u?[]:u.nodes.map((function(t){return T({},t)}))).length,data:r}]}var u}))}))},addAddressBookEntry:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return e=Buffer.from("reaction/account:"+t.accountId,"binary").toString("base64"),[4,m({accountId:e,address:t.address})];case 1:return[2,{user:n.sent().data.addAddressBookAccountEntry}]}}))}))},updateAddressBookEntry:function(t){return P(void 0,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return e=Buffer.from("reaction/account:"+t.accountId,"binary").toString("base64"),[4,g({accountId:e,addressId:t.addressId,address:t.address})];case 1:return[2,{user:n.sent().data.updateAddressBookAccountEntry}]}}))}))}}),W=M({firstName:null,lastName:null,email:null,password:null}),X=M({firstName:null,lastName:null,address1:null,streetNumber:null,phone:null,postal:null,city:null,country:null,company:null}),Y=M({firstName:null,lastName:null,address1:null,streetNumber:null,phone:null,postal:null,city:null,country:null,company:null}),Z=M([]),tt=M(null),et=M(null),nt=M({personalDetails:!0,shipping:!0,payment:!0}),rt=function(t){return function(e){var n=this,r=O(e),a=r.initialState,u=r.saveToInitialState;null!=a&&void 0!==a||u({personalDetails:t.personalDetails});var i=M(!1);return{disabled:w((function(){return t.disabled.value})),personalDetails:w((function(){return t.personalDetails.value})),shippingDetails:w((function(){return t.shippingDetails.value})),billingDetails:w((function(){return t.billingDetails.value})),paymentMethods:w((function(){return t.paymentMethods.value})),orderReferenceId:w((function(){return t.orderReferenceId.value})),chosenPaymentMethod:w((function(){return t.chosenPaymentMethod.value})),loading:w((function(){return i.value})),placeOrder:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return i.value=!0,[4,t.placeOrder(e)];case 1:return n=r.sent().referenceId,t.orderReferenceId.value=n,i.value=!1,[2]}}))}))},availablePaymentMethods:function(e){return P(n,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return i.value=!0,[4,t.availablePaymentMethods(e)];case 1:return n=r.sent().data,t.paymentMethods.value=n,i.value=!1,[2]}}))}))},setPersonalDetails:function(e){return P(n,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return i.value=!0,[4,t.setPersonalDetails(e)];case 1:return n.sent(),i.value=!1,[2]}}))}))},setShippingDetails:function(e){return P(n,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return i.value=!0,[4,t.setShippingDetails(e)];case 1:return n.sent(),i.value=!1,[2]}}))}))},setBillingDetails:function(e){return P(n,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return i.value=!0,[4,t.setBillingDetails(e)];case 1:return n.sent(),i.value=!1,[2]}}))}))},setPaymentMethod:function(e){return P(n,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return i.value=!0,[4,t.setPaymentMethod(e)];case 1:return n.sent(),i.value=!1,[2]}}))}))}}}}({disabled:nt,personalDetails:W,shippingDetails:X,billingDetails:Y,paymentMethods:Z,chosenPaymentMethod:tt,orderReferenceId:et,placeOrder:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,I(t)];case 1:return[2,{referenceId:e.sent().data.placeOrder.orders[0].referenceId}]}}))}))},availablePaymentMethods:function(t){return P(void 0,void 0,void 0,(function(){var e,n;return C(this,(function(r){switch(r.label){case 0:return[4,y(t)];case 1:return[2,{data:(e=r.sent()).data.availablePaymentMethods,total:(null===(n=e.data.availablePaymentMethods)||void 0===n?void 0:n.length)||0}]}}))}))},setPersonalDetails:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){return t.firstName&&(W.value.firstName=t.firstName),t.lastName&&(W.value.lastName=t.lastName),t.email&&(W.value.email=t.email),null!=W.value.firstName&&null!=W.value.lastName&&null!=W.value.email&&(nt.value.personalDetails=!1),[2]}))}))},setShippingDetails:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){return t.streetName&&(X.value.address1=t.streetName),t.streetNumber&&(X.value.streetNumber=t.streetNumber),t.city&&(X.value.city=t.city),t.country&&(X.value.country=t.country),t.postalCode&&(X.value.postal=t.postalCode),t.phone&&(X.value.phone=t.phone),t.firstName&&(X.value.firstName=t.firstName),t.lastName&&(X.value.lastName=t.lastName),null!=X.value.firstName&&null!=X.value.lastName&&null!=X.value.city&&null!=X.value.country&&null!=X.value.postal&&null!=X.value.address1&&null!=X.value.streetNumber&&null!=X.value.phone&&(nt.value.shipping=!1),[2]}))}))},setBillingDetails:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){return t.firstName&&(Y.value.firstName=t.firstName),t.lastName&&(Y.value.lastName=t.lastName),t.streetName&&(Y.value.address1=t.streetName),t.streetNumber&&(Y.value.streetNumber=t.streetNumber),t.city&&(Y.value.city=t.city),t.country&&(Y.value.country=t.country),t.postalCode&&(Y.value.postal=t.postalCode),t.phone&&(Y.value.phone=t.phone),t.company&&(Y.value.company=t.company),null!=Y.value.city&&null!=Y.value.country&&null!=Y.value.postal&&null!=Y.value.address1&&null!=Y.value.streetNumber&&null!=Y.value.phone&&null!=Y.value.firstName&&null!=Y.value.lastName&&(nt.value.payment=!1),[2]}))}))},setPaymentMethod:function(t){return P(void 0,void 0,void 0,(function(){return C(this,(function(e){return tt.value=t,nt.value.payment=!1,[2]}))}))}});M(null);var at=function(t){return function(e){var n=this,r=O(e),a=r.initialState,u=r.saveToInitialState;null!=a&&void 0!==a||u({primaryShopId:null});var i=M((null==a?void 0:a.primaryShopId)||null),o=M(!1);return{primaryShopId:w((function(){return i.value})),getPrimaryShopId:function(){return P(n,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return o.value=!0,[4,t.getPrimaryShopId()];case 1:return e=n.sent().data,i.value=e,u({primaryShopId:i}),o.value=!1,[2]}}))}))},loading:w((function(){return o.value}))}}}({getPrimaryShopId:function(){return P(void 0,void 0,void 0,(function(){return C(this,(function(t){switch(t.label){case 0:return[4,b()];case 1:return[2,{data:t.sent().data.primaryShopId}]}}))}))}});export{U as cartGetters,j as catalogItemGetters,z as checkoutGetters,D as onSSR,H as orderGetters,J as useCart,q as useCatalogItem,R as useCatalogItems,rt as useCheckout,at as usePrimaryShop,O as useSSR,$ as useTags,K as useUser};
